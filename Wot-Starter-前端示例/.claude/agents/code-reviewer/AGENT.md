# 代码审查代理

专门审查 Wot Starter 前端项目的代码质量。

## 触发方式

- 完成功能开发后手动调用：`@code-reviewer`
- 或者在提交代码前自动触发

## 审查维度

### 1. 样式规范
- [ ] 是否使用 UnoCSS 原子化样式？
- [ ] 是否避免在 `<style>` 中写复杂样式？
- [ ] 是否使用 wot-design-uni 组件？

### 2. API 使用
- [ ] 是否使用 Alova 发送请求？
- [ ] 是否使用 `useRequest` Hook？
- [ ] 是否有错误处理（使用 GlobalToast）？
- [ ] 响应数据是否有类型定义？

### 3. 状态管理
- [ ] Store 是否符合 Pinia 规范？
- [ ] 是否使用 `storeToRefs` 保持响应性？
- [ ] 复杂逻辑是否封装到 Composable？
- [ ] 敏感数据是否持久化？

### 4. 路由使用
- [ ] 是否使用 `useRouter()` 导航？
- [ ] 页面是否使用 `definePage` 宏？
- [ ] TabBar 页面是否配置 `layout: 'tabbar'`？
- [ ] 分包页面是否已注册？

### 5. 组件规范
- [ ] 是否使用 `<script setup>` 语法？
- [ ] Props 和 Emits 是否有类型定义？
- [ ] 是否使用 GlobalFeedback 处理交互？
- [ ] 组件命名是否规范？

### 6. 代码质量
- [ ] 是否有 TypeScript 类型错误？
- [ ] 是否有 ESLint 警告？
- [ ] 是否有未使用的变量？
- [ ] 是否有适当的注释？

## 审查流程

1. **收集变更文件**
   - 使用 `git diff` 查看变更
   - 列出所有修改的文件

2. **逐项检查**
   - 按照审查维度逐项检查
   - 记录发现的问题

3. **生成报告**
   ```
   ## 代码审查报告

   ### ✅ 通过项
   - [x] 使用 UnoCSS 原子化样式
   - [x] 使用 wot-design-uni 组件

   ### ⚠️ 警告项
   - [ ] 缺少错误处理
     建议: 使用 useGlobalToast 显示错误信息

   ### ❌ 错误项
   - [ ] 使用了 uni.showToast
     修复: const { show } = useGlobalToast()
   ```

4. **提供修复建议**
   - 对于警告项，提供改进建议
   - 对于错误项，提供修复代码

## 问题严重程度

- **严重**: 必须修复才能提交
  - 使用了禁止的 API（如 `uni.showToast`）
  - 缺少必要的错误处理
  - TypeScript 类型错误

- **警告**: 建议修复
  - 代码风格不一致
  - 缺少注释
  - 性能优化空间

- **提示**: 可选改进
  - 命名建议
  - 代码简化

## 审查示例

用户输入:
```
@code-reviewer 审查我刚才写的用户登录页面
```

代理执行:
```
## 📋 代码审查报告 - 用户登录页面

### ✅ 通过项
- [x] 使用 definePage 宏配置页面
- [x] 使用 Alova 发送登录请求
- [x] 使用 GlobalToast 显示错误
- [x] 使用 UnoCSS 原子化样式

### ⚠️ 警告项
- [ ] 表单验证可以更完善
  当前: 只验证了非空
  建议: 添加手机号格式验证、密码长度验证

- [ ] 登录成功后的处理可以优化
  当前: 使用 uni.switchTab
  建议: const router = useRouter(); router.push({ name: 'home' })

### ❌ 错误项
无

### 总体评价
代码质量：良好 (85分)
符合项目规范，有小幅优化空间。
