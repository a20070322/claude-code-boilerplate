# ğŸ‰ LangChain Starter é…ç½®å®Œæˆ!

ä½¿ç”¨æŒ‡å— - è®©ä½ å¿«é€Ÿä¸Šæ‰‹ LangChain å¼€å‘

## âœ… å·²å®Œæˆçš„é…ç½®

### æ ¸å¿ƒé…ç½®
- âœ… settings.json - æ ¸å¿ƒ Hook å’ŒæŠ€èƒ½æ³¨å†Œ
- âœ… 3ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­ - ä¼šè¯å¯åŠ¨ã€æŠ€èƒ½è¯„ä¼°ã€ä»»åŠ¡æ€»ç»“
- âœ… 5ä¸ªä¸“ä¸šæŠ€èƒ½ - é“¾ã€æ™ºèƒ½ä½“ã€æç¤ºã€æ£€ç´¢å™¨ã€è®°å¿†
- âœ… 5ä¸ªå¿«æ·å‘½ä»¤ - /chain, /agent, /prompt, /retriever, /check
- âœ… 1ä¸ªå®¡æŸ¥ä»£ç† - @chain-reviewer
- âœ… å®Œæ•´æ–‡æ¡£ä½“ç³» - CLAUDE.md, README, æŠ€èƒ½æ–‡æ¡£, å‘½ä»¤æ–‡æ¡£

## ğŸš€ ç«‹å³å¼€å§‹ä½¿ç”¨

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /path/to/langchain-starter

# å®‰è£…ä¾èµ–
pip install langchain langchain-core langchain-anthropic python-dotenv

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ·»åŠ  ANTHROPIC_API_KEY
```

### 2. å¯åŠ¨ Claude Code

```bash
claude
```

å¯åŠ¨åä¼šçœ‹åˆ°ï¼š
```
## ğŸ¦œ LangChain é¡¹ç›®ä¼šè¯å·²å¯åŠ¨

**æ—¶é—´**: 2026/1/31 17:00:00
**Git åˆ†æ”¯**: `main`

ğŸ’¡ **å¿«æ·å‘½ä»¤**:
| /chain | åˆ›å»º LangChain é“¾ |
| /agent | åˆ›å»º LangChain æ™ºèƒ½ä½“ |
| /prompt | åˆ›å»ºæç¤ºæ¨¡æ¿ |
| /retriever | åˆ›å»ºæ£€ç´¢å™¨ |
| /check | æ£€æŸ¥é…ç½®å’Œä»£ç  |

ğŸ¯ **æ ¸å¿ƒæŠ€èƒ½**:
- `langchain-chain` - æ„å»ºé“¾ (LCELé“¾ã€é¡ºåºé“¾ç­‰)
- `langchain-agent` - å¼€å‘æ™ºèƒ½ä½“ (ReActã€å·¥å…·è°ƒç”¨ç­‰)
...
```

### 3. åˆ›å»ºç¬¬ä¸€ä¸ªé“¾

```bash
/chain basic
```

Claude Code ä¼šï¼š
1. è¯„ä¼°æ˜¯å¦éœ€è¦ langchain-chain æŠ€èƒ½
2. æ¿€æ´»æŠ€èƒ½å¹¶è·å–è§„èŒƒ
3. ç”Ÿæˆç¬¦åˆè§„èŒƒçš„ä»£ç 
4. æä¾›æµ‹è¯•ç¤ºä¾‹

## ğŸ“‹ æ ¸å¿ƒè§„èŒƒé€ŸæŸ¥

### LCEL é“¾æ„å»º

```python
# âœ… æ­£ç¡®
from langchain_core.prompts import ChatPromptTemplate
from langchain_core.output_parsers import StrOutputParser
from langchain_anthropic import ChatAnthropic

prompt = ChatPromptTemplate.from_template("è®²ä¸€ä¸ªå…³äº{topic}çš„æ•…äº‹")
llm = ChatAnthropic(model="claude-3-5-sonnet-20241022")
output_parser = StrOutputParser()

chain = prompt | llm | output_parser  # LCEL è¯­æ³•
result = chain.invoke({"topic": "AI"})  # ä½¿ç”¨ invoke
```

```python
# âŒ é”™è¯¯ - ä¸è¦ä½¿ç”¨å·²å¼ƒç”¨çš„ API
from langchain.chains import LLMChain

chain = LLMChain(llm=llm, prompt=prompt)  # å·²å¼ƒç”¨
result = chain.run(topic="AI")  # å·²å¼ƒç”¨
```

### å·¥å…·è°ƒç”¨ Agent

```python
# âœ… æ­£ç¡® - ä½¿ç”¨æ–°ç‰ˆ API
from langchain.agents import create_tool_calling_agent, AgentExecutor
from langchain.tools import tool

@tool
def search(query: str) -> str:
    """æœç´¢äº’è”ç½‘ä¿¡æ¯"""
    return f"å…³äº {query} çš„ç»“æœ"

agent = create_tool_calling_agent(llm, [search], prompt)
executor = AgentExecutor(
    agent=agent,
    tools=[search],
    max_iterations=10,  # è®¾ç½®é™åˆ¶
    handle_parsing_errors=True  # å¯ç”¨é”™è¯¯å¤„ç†
)
```

### æç¤ºæ¨¡æ¿

```python
# âœ… æ­£ç¡® - ä½¿ç”¨ ChatPromptTemplate
from langchain_core.prompts import ChatPromptTemplate

prompt = ChatPromptTemplate.from_messages([
    ("system", "ä½ æ˜¯ä¸€ä¸ª{role}ã€‚"),
    ("human", "{input}")
])
```

```python
# âŒ é”™è¯¯ - ä¸è¦ä½¿ç”¨ PromptTemplate
from langchain_core.prompts import PromptTemplate

prompt = PromptTemplate(
    template="ä½ æ˜¯ä¸€ä¸ª{role}ã€‚\n{input}",
    input_variables=["role", "input"]
)
```

## ğŸ¯ å…¸å‹ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1: å¿«é€Ÿåˆ›å»º RAG ç³»ç»Ÿ

```bash
# Step 1: åˆ›å»ºæ£€ç´¢å™¨
/retriever basic --vector-store chroma --k 5

# Step 2: åˆ›å»º RAG é“¾
/chain rag --vector-store chroma

# Step 3: æµ‹è¯•
python -c "from chains.rag_chain import rag_chain; print(rag_chain.invoke('æµ‹è¯•'))"

# Step 4: å®¡æŸ¥ä»£ç 
@chain-reviewer å®¡æŸ¥ RAG é“¾
```

### åœºæ™¯ 2: åˆ›å»ºå·¥å…·è°ƒç”¨ Agent

```bash
# Step 1: åˆ›å»º Agent
/agent tool-calling --tools search,calculator

# Step 2: æ·»åŠ è®°å¿†
ä½¿ç”¨ langchain-memory æŠ€èƒ½é…ç½® ConversationBufferMemory

# Step 3: æµ‹è¯•
python -m pytest tests/test_agent.py -v

# Step 4: å…¨é¢æ£€æŸ¥
/check all
```

### åœºæ™¯ 3: ä¼˜åŒ–ç°æœ‰ä»£ç 

```bash
# Step 1: å®¡æŸ¥ä»£ç 
@chain-reviewer æ£€æŸ¥ chains/old_chain.py

# Step 2: æŸ¥çœ‹é—®é¢˜æ¸…å•
# è¾“å‡ºä¼šåˆ—å‡ºæ‰€æœ‰é—®é¢˜å¹¶æŒ‰ä¼˜å…ˆçº§æ’åº

# Step 3: ä½¿ç”¨æŠ€èƒ½é‡æ„
ä½¿ç”¨ langchain-chain æŠ€èƒ½é‡æ„ä¸º LCEL

# Step 4: éªŒè¯æ”¹è¿›
/check code
```

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. å¼€å‘æµç¨‹

```
è§„åˆ’ â†’ æŠ€èƒ½è¯„ä¼° â†’ ä»£ç å®ç° â†’ æµ‹è¯•éªŒè¯ â†’ ä»£ç å®¡æŸ¥ â†’ ä¼˜åŒ–å®Œå–„
```

### 2. é”™è¯¯å¤„ç†

```python
from langchain_core.prompts import ChatPromptTemplate
from langchain_anthropic import ChatAnthropic
from langchain_core.output_parsers import StrOutputParser

# æ·»åŠ é”™è¯¯å¤„ç†
try:
    chain = prompt | llm | output_parser
    result = chain.invoke({"input": "æµ‹è¯•"}, config={"timeout": 30})
except Exception as e:
    logger.error(f"é“¾æ‰§è¡Œå¤±è´¥: {e}")
    # å›é€€ç­–ç•¥
    result = fallback_chain.invoke({"input": "æµ‹è¯•"})
```

### 3. ç±»å‹å®‰å…¨

```python
from pydantic import BaseModel, Field
from langchain_core.output_parsers import PydanticOutputParser

# å®šä¹‰è¾“å‡ºæ¨¡å‹
class Response(BaseModel):
    answer: str = Field(description="å›ç­”å†…å®¹")
    confidence: float = Field(description="ç½®ä¿¡åº¦ 0-1")

# ä½¿ç”¨ç±»å‹å®‰å…¨çš„è§£æå™¨
parser = PydanticOutputParser(pydantic_object=Response)
chain = prompt | llm | parser
result = chain.invoke({"input": "æµ‹è¯•"})
# result æ˜¯ Response å¯¹è±¡ï¼Œæœ‰ç±»å‹æ£€æŸ¥
```

### 4. æ€§èƒ½ä¼˜åŒ–

```python
# æ‰¹é‡å¤„ç†
results = chain.batch([
    {"input": "æµ‹è¯•1"},
    {"input": "æµ‹è¯•2"},
    {"input": "æµ‹è¯•3"}
])

# æµå¼è¾“å‡º
for chunk in chain.stream({"input": "é•¿æ–‡æœ¬"}):
    print(chunk, end="", flush=True)

# å¹¶è¡Œæ‰§è¡Œ
from langchain_core.runnables import RunnableParallel

chain = RunnableParallel(
    summary=summary_chain,
    translation=translation_chain
)
```

## ğŸ” å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆå¼ºåˆ¶æŠ€èƒ½è¯„ä¼°?

**A:** ç¡®ä¿ AI éµå¾ª LangChain æœ€ä½³å®è·µï¼Œé¿å…ä½¿ç”¨å·²å¼ƒç”¨çš„ APIï¼Œå†™å‡ºæ›´è§„èŒƒã€æ›´é«˜æ•ˆçš„ä»£ç ã€‚

### Q: æŠ€èƒ½è¯„ä¼°ä¼šå¢åŠ å¼€å‘æ—¶é—´å—?

**A:** ä¸ä¼šã€‚æŠ€èƒ½è¯„ä¼°æ˜¯è‡ªåŠ¨çš„ï¼Œè€Œä¸”é¿å…äº†åæœŸè¿”å·¥ã€‚å®é™…ä¸Šä¼šæé«˜å¼€å‘æ•ˆç‡ã€‚

### Q: å¯ä»¥è·³è¿‡æŠ€èƒ½è¯„ä¼°å—?

**A:** ä½¿ç”¨æ–œæ å‘½ä»¤ï¼ˆå¦‚ `/chain`ï¼‰ä¼šè·³è¿‡è¯„ä¼°ç›´æ¥æ‰§è¡Œã€‚ä½†å»ºè®®è®© AI è¯„ä¼°ä»¥è·å¾—æ›´å¥½çš„ä»£ç è´¨é‡ã€‚

### Q: å¦‚ä½•æ·»åŠ è‡ªå®šä¹‰æŠ€èƒ½?

**A:** åœ¨ `.claude/skills/` ç›®å½•åˆ›å»ºæ–°æ–‡ä»¶å¤¹å’Œ SKILL.md æ–‡ä»¶ï¼Œå‚è€ƒç°æœ‰æŠ€èƒ½çš„æ ¼å¼ã€‚

### Q: å¦‚ä½•è°ƒè¯•é“¾çš„æ‰§è¡Œ?

**A:** æœ‰å‡ ç§æ–¹å¼ï¼š
1. ä½¿ç”¨ `verbose=True` æŸ¥çœ‹è¯¦ç»†è¾“å‡º
2. ä½¿ç”¨ LangSmith è¿½è¸ªæ‰§è¡Œ
3. æ·»åŠ  print è¯­å¥æˆ–æ—¥å¿—
4. å•ç‹¬æµ‹è¯•æ¯ä¸ªç»„ä»¶

## ğŸ“Š æ•ˆæœå¯¹æ¯”

### ä½¿ç”¨é…ç½®å‰

```python
# âŒ ä½¿ç”¨å·²å¼ƒç”¨çš„ API
from langchain.chains import LLMChain
from langchain.prompts import PromptTemplate

chain = LLMChain(
    llm=OpenAI(temperature=0.7),
    prompt=PromptTemplate(
        template="Translate {input} to {language}",
        input_variables=["input", "language"]
    )
)
result = chain.run(input="Hello", language="Chinese")
```

**é—®é¢˜:**
- ä½¿ç”¨å·²å¼ƒç”¨çš„ API
- ç¼ºå°‘ç±»å‹æ³¨è§£
- æ²¡æœ‰é”™è¯¯å¤„ç†
- æ€§èƒ½ä¸ä½³

### ä½¿ç”¨é…ç½®å

```python
# âœ… ä½¿ç”¨ LCEL å’Œæœ€ä½³å®è·µ
from langchain_core.prompts import ChatPromptTemplate
from langchain_core.output_parsers import StrOutputParser
from langchain_anthropic import ChatAnthropic

prompt = ChatPromptTemplate.from_template("Translate {input} to {language}")
llm = ChatAnthropic(model="claude-3-5-sonnet-20241022", temperature=0.7)
output_parser = StrOutputParser()

chain = prompt | llm | output_parser

try:
    result = chain.invoke({
        "input": "Hello",
        "language": "Chinese"
    }, config={"timeout": 30})
except Exception as e:
    logger.error(f"Translation failed: {e}")
    result = "Translation failed"
```

**æ”¹è¿›:**
- âœ… ä½¿ç”¨ LCEL è¯­æ³•
- âœ… ä½¿ç”¨ ChatPromptTemplate
- âœ… ä½¿ç”¨ invoke è€Œä¸æ˜¯ run
- âœ… æ·»åŠ é”™è¯¯å¤„ç†
- âœ… æ·»åŠ è¶…æ—¶é…ç½®
- âœ… æ·»åŠ æ—¥å¿—è®°å½•

## ğŸ“ å­¦ä¹ è·¯å¾„

### åˆå­¦è€… (1-2å‘¨)
1. å­¦ä¹  LCEL åŸºç¡€è¯­æ³•
2. åˆ›å»ºç®€å•é“¾
3. ç†è§£æç¤ºæ¨¡æ¿
4. å­¦ä¹ åŸºç¡€ Agent

### ä¸­çº§ (2-4å‘¨)
1. æ„å»º RAG ç³»ç»Ÿ
2. å®ç°å·¥å…·è°ƒç”¨ Agent
3. é…ç½®è®°å¿†ç»„ä»¶
4. ä¼˜åŒ–æ£€ç´¢è´¨é‡

### é«˜çº§ (1-2æœˆ)
1. å¤æ‚å¤šæ­¥é“¾
2. è‡ªå®šä¹‰æ£€ç´¢å™¨
3. é«˜çº§ Agent æ¨¡å¼
4. æ€§èƒ½ä¼˜åŒ–å’Œç›‘æ§

## ğŸ“š æ›´å¤šèµ„æº

### å®˜æ–¹æ–‡æ¡£
- [LangChain æ–‡æ¡£](https://python.langchain.com/)
- [LCEL æŒ‡å—](https://python.langchain.com/docs/expression_language/)
- [Agent æŒ‡å—](https://python.langchain.com/docs/modules/agents/)
- [RAG æ•™ç¨‹](https://python.langchain.com/docs/use_cases/question_answering/)

### æœ¬åœ°æ–‡æ¡£
- `.claude/CLAUDE.md` - é¡¹ç›®è§„èŒƒ
- `.claude/skills/` - æŠ€èƒ½è¯¦ç»†æ–‡æ¡£
- `.claude/commands/` - å‘½ä»¤ä½¿ç”¨è¯´æ˜
- `README.md` - é¡¹ç›®è¯´æ˜

### ç¤ºä¾‹ä»£ç 
- `chains/` - é“¾ç¤ºä¾‹
- `agents/` - æ™ºèƒ½ä½“ç¤ºä¾‹
- `prompts/` - æç¤ºæ¨¡æ¿ç¤ºä¾‹
- `retrievers/` - æ£€ç´¢å™¨ç¤ºä¾‹

## ğŸ¤ è·å–å¸®åŠ©

é‡åˆ°é—®é¢˜æ—¶ï¼š
1. æŸ¥çœ‹ `.claude/CLAUDE.md` è§„èŒƒæ–‡æ¡£
2. ä½¿ç”¨ `/check` å‘½ä»¤æ£€æŸ¥é…ç½®
3. ä½¿ç”¨ `@chain-reviewer` å®¡æŸ¥ä»£ç 
4. æŸ¥é˜…æŠ€èƒ½æ–‡æ¡£
5. æŸ¥çœ‹ LangChain å®˜æ–¹æ–‡æ¡£

---

**å¼€å§‹ä½ çš„ LangChain ä¹‹æ—…å§ï¼** ğŸš€

æœ‰é—®é¢˜éšæ—¶ä½¿ç”¨ `/check` æˆ– `@chain-reviewer` è·å–å¸®åŠ©ã€‚
