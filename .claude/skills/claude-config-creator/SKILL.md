---
name: claude-config-creator
description: 为任何技术栈创建完整的 Claude Code 配置模板
---

# Claude Code 配置创建器

基于 RuoYi-Plus (后端) 和 Wot Starter (前端) 的成功经验，为任何技术栈创建生产级的 Claude Code 配置模板。

## 核心原则

### 🎯 目标
让 AI 像一个经验丰富的该技术栈工程师一样工作，而不是通用的程序员。

### 🔑 成功要素
1. **强制技能评估** - 通过 Hook 强制 AI 遵循规范
2. **标准开发流程** - 通过命令体系标准化流程
3. **代码质量保障** - 通过代理审查代码质量
4. **完整文档体系** - 通过文档沉淀知识

## 配置架构

```
.claude/
├── settings.json          # 核心配置 (钩子注册)
├── CLAUDE.md              # 项目规范 (总文档)
├── hooks/                 # 生命周期钩子
│   ├── session-start.mjs           # 会话启动
│   ├── user-prompt-submit.mjs      # 强制技能评估 ⭐核心
│   ├── pre-tool-use.mjs            # 危险命令拦截
│   └── stop.mjs                    # 任务总结
├── skills/                # 专业技能
│   └── {skill-name}/      # 每个技能包含：
│       └── SKILL.md       # - 模板 + 禁止事项 + 检查清单
├── commands/              # 斜杠命令
│   └── {command}.md       # 标准化开发流程
├── agents/                # 代理
│   └── {agent-name}/      # 自动化任务
│       └── AGENT.md
└── docs/                  # 项目文档
    ├── 项目状态.md
    └── 待办清单.md
```

## 创建流程

### 第一步：技术栈分析

#### 必须了解的信息
1. **核心技术栈**
   - 语言/框架版本
   - 构建工具
   - 包管理器

2. **架构模式**
   - 分层架构 (如 MVC, 三层架构)
   - 设计模式
   - 约定优于配置

3. **开发规范**
   - 命名规范
   - 代码风格
   - 必须使用/禁止使用的库/方法

4. **常见痛点**
   - 新手容易犯的错误
   - 代码规范问题
   - 性能陷阱

#### 信息收集方法
```bash
# 查看官方文档
# 阅读最佳实践指南
# 分析现有项目结构
# 提取 common patterns
```

### 第二步：技能设计

#### 技能分类

**1. 核心开发技能** (必须)
针对主要的开发任务：
- 后端：CRUD开发、API设计、数据库操作
- 前端：页面创建、组件开发、状态管理
- 移动端：页面路由、网络请求、本地存储

**2. 辅助技能** (可选)
- 错误处理
- 性能优化
- 安全防护
- 代码规范

#### 技能模板结构

每个 SKILL.md 必须包含：

```markdown
---
name: skill-name
description: 简短描述
---

# 技能名称

## 使用场景
[什么时候触发这个技能]

## 代码模板
[完整的、可直接使用的代码示例]

## 禁止事项 ⭐重要
- ❌ 不要做X (说明原因)
- ❌ 不要使用Y方法 (应该用Z)

## 检查清单 ⭐重要
- [ ] 检查项1
- [ ] 检查项2

## 注意事项
[其他重要说明]
```

#### 关键设计原则

**1. 禁止事项必须明确**
```markdown
# ❌ 错误示例
## 注意事项
不要使用某些方法

# ✅ 正确示例
## 禁止事项
- ❌ 不要使用 BeanUtil.copyProperties() (类型不安全)
- ❌ 不要在 Service 层构建查询条件 (应该在 DAO 层)
- ❌ 不要使用自增主键 (应该使用雪花ID)
```

**2. 检查清单必须可执行**
```markdown
# ❌ 错误示例
## 检查清单
- 代码质量
- 规范检查

# ✅ 正确示例
## 检查清单
- [ ] Service 是否没有继承 ServiceImpl?
- [ ] DAO 层是否实现了 buildQueryWrapper()?
- [ ] Controller 路径是否包含实体名称?
- [ ] 是否使用类型安全的转换工具?
```

**3. 代码模板必须完整**
- 不要只给片段
- 给出完整的、可运行的代码
- 包含必要的导入和类型定义

### 第三步：命令设计

#### 命令分类

**1. 开发流程命令**
```
/dev    - 标准开发流程 (多步骤)
/crud   - 快速生成代码 (单一任务)
```

**2. 创建命令**
```
/page      - 创建页面
/api       - 创建API
/component - 创建组件
```

**3. 检查命令**
```
/check     - 规范检查
/test      - 运行测试
```

#### 命令模板

```markdown
# /命令名 - 简短描述

## 描述
[这个命令做什么，解决什么问题]

## 使用方法
```
/命令名 参数示例
```

## 执行步骤

### 步骤 1: XXX
- [ ] 子任务1
- [ ] 子任务2

### 步骤 2: XXX
[详细说明]

## 示例执行
[给出完整的执行示例]

## 注意事项
[使用时需要注意什么]
```

#### 命令设计原则

1. **步骤清晰** - 每个步骤都有明确的输出
2. **可验证** - 每步完成后都可以验证
3. **标准化** - 遵循统一的格式

### 第四步：钩子设计

#### 4个核心钩子

**1. session-start.mjs**
```javascript
// 会话启动时执行
export async function sessionStart(context) {
  console.log('## 🚀 项目会话已启动')
  console.log(`**时间**: ${new Date().toLocaleString()}`)
  console.log(`**Git 分支**: ${branch}`)
  console.log('💡 **快捷命令**:')
  // 展示命令列表
  // 展示技能列表
}
```

**2. user-prompt-submit.mjs** ⭐最核心
```javascript
// 强制技能评估
export async function userPromptSubmit(context) {
  // 如果是斜杠命令，放行
  if (prompt.startsWith('/')) return { proceed: true }

  // 检查是否是代码任务
  if (isCodeTask(prompt)) {
    return {
      proceed: false,
      message: `
## 指令:强制技能激活流程

### 步骤 1 - 评估
针对以下每个技能,陈述: [技能名] - 是/否 - [理由]

### 步骤 2 - 激活
如果任何技能为"是" → 立即激活

### 步骤 3 - 实现
只有在步骤 2 完成后,才能开始实现。
      `
    }
  }
}
```

**3. pre-tool-use.mjs**
```javascript
// 拦截危险命令
export async function preToolUse(context) {
  const dangerousPatterns = [
    { pattern: /rm\s+-rf\s+\//, message: '⚠️ 警告：正在删除根目录！' },
    // 添加其他危险命令
  ]
  // 检查并拦截
}
```

**4. stop.mjs**
```javascript
// 任务完成总结
export async function stop(context) {
  console.log('## 📋 任务完成总结')
  console.log('✅ **检查清单**')
  // 列出检查项
  console.log('📝 **建议操作**')
  // 列出建议
}
```

### 第五步：代理设计

#### code-reviewer (代码审查代理)

**审查维度**：
- 代码规范
- 架构规范
- 安全问题
- 性能问题
- 错误处理

**输出格式**：
```
## 代码审查报告

### ✅ 通过项
- [x] 符合规范A

### ⚠️ 警告项
- [ ] 可优化项B
  建议: XXX

### ❌ 错误项
- [ ] 违反规范C
  修复: XXX
```

#### project-manager (项目管理代理)

**管理内容**：
- 项目进度
- 待办清单
- 问题跟踪
- 进度报告

**输出格式**：
```
## 项目状态已更新

### 最新进度
- ✅ 功能A (日期)

### 当前进度
- 已完成: XXX
- 进行中: XXX
- 计划中: XXX
```

### 第六步：文档编写

#### CLAUDE.md (项目规范)

**必需章节**：
```markdown
# 项目规范

## 项目概述
## 技术栈
## 核心规范
## 快捷命令         ⭐
## 技能 (Skills)    ⭐
## 代理 (Agents)    ⭐
## 开发流程
## 代码检查清单     ⭐
## 常见问题
## 最佳实践
```

#### README.md (模板说明)

**必需章节**：
```markdown
# 模板名称

## 简介
## 包含内容
## 技术栈
## 快速开始
## 核心特性
## 与其他模板对比
## 使用示例
## 常见问题
```

#### 使用指南.md

**必需章节**：
```markdown
# 🎉 配置完成!使用指南

## ✅ 已完成的配置
## 🚀 立即开始使用
## 📋 核心规范速查
## 🎯 典型使用场景
## 💡 最佳实践
## 🔍 常见问题
## 📊 效果对比
```

#### docs/项目状态.md & 待办清单.md
- 用于 @project-manager 代理记录和更新

### 第七步：测试验证

#### 配置验证清单
- [ ] JSON 格式正确
- [ ] Hook 脚本可执行
- [ ] 技能描述清晰
- [ ] 命令步骤明确
- [ ] 代理逻辑完整
- [ ] 文档链接可访问

#### 功能测试
```bash
# 1. 启动测试
# 观察是否正确显示会话启动信息

# 2. 命令测试
/page 测试页面
# 观察是否正确执行

# 3. 技能测试
创建测试页面
# 观察是否强制评估技能

# 4. 代理测试
@code-reviewer 审查
# 观察是否生成报告
```

## 成功案例参考

### RuoYi-Plus (后端企业级)
- **技术栈**: Spring Boot + MyBatis-Plus
- **技能数**: 4个 (CRUD/API/数据库/规范)
- **命令数**: 3个 (/dev /crud /check)
- **特点**: 四层架构，严格规范

### Wot Starter (前端多端)
- **技术栈**: uni-app + Vue3 + Wot UI
- **技能数**: 6个 (页面/API/Store/路由/交互/Composable)
- **命令数**: 5个 (/page /api /store /component /check)
- **特点**: 三层架构，多端支持

### 共同成功要素
1. ✅ 强制技能评估机制
2. ✅ 完整的命令体系
3. ✅ 明确的禁止事项
4. ✅ 结构化的检查清单
5. ✅ 代码审查代理
6. ✅ 项目管理代理
7. ✅ 完整的文档体系

## 常见误区

### ❌ 误区1：只提供文档，不提供强制
```
错误：只在 CLAUDE.md 中写规范
正确：通过 user-prompt-submit Hook 强制评估技能
```

### ❌ 误区2：技能只有模板，没有禁止事项
```
错误：只告诉 AI 怎么做
正确：还要告诉 AI 不能做什么
```

### ❌ 误区3：命令只有描述，没有步骤
```
错误：命令只说"创建页面"
正确：命令列出详细的执行步骤
```

### ❌ 误区4：缺少代理系统
```
错误：没有代码审查和项目管理
正确：提供 @code-reviewer 和 @project-manager
```

### ❌ 误区5：文档不完整
```
错误：只有 CLAUDE.md
正确：CLAUDE.md + README.md + 使用指南.md + docs/
```

## 快速创建清单

### 最小配置 (MVP)
- [ ] settings.json
- [ ] CLAUDE.md
- [ ] 1个核心技能 (包含禁止事项和检查清单)
- [ ] 1个命令
- [ ] user-prompt-submit.mjs (强制评估)

### 标准配置 (推荐)
- [ ] 4个核心钩子
- [ ] 4-6个核心技能
- [ ] 3-5个命令
- [ ] 2个代理 (@code-reviewer, @project-manager)
- [ ] 完整文档体系

### 完整配置 (企业级)
- [ ] 标准配置全部内容
- [ ] 额外的辅助技能 (性能/安全/测试)
- [ ] 更多的命令 (部署/测试/监控)
- [ ] 示例代码和测试用例
- [ ] 视频教程和最佳实践文档

## 实施建议

### 分阶段实施
1. **第一阶段**: 创建核心钩子和1个技能
2. **第二阶段**: 添加命令和更多技能
3. **第三阶段**: 添加代理和完整文档

### 迭代优化
- 先让 AI 能遵循基本规范
- 再逐步完善细节
- 根据实际使用反馈调整

### 知识沉淀
- 记录常见问题和解决方案
- 更新技能文档
- 完善代码模板

## 参考资源

- [RuoYi-Plus 配置](../ RuoYi-Plus-示例/) - 后端企业级配置
- [Wot Starter 配置](../Wot-Starter-前端示例/) - 前端多端配置
- [Claude Code 文档](https://docs.anthropic.com/claude/code)
- [Agent Skills 规范](https://platform.claude.com/docs/en/agents-and-tools/agent-skills/overview)
